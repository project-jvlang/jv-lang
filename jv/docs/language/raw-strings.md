# Raw文字列とテキストブロック

raw文字列は、Java 25のテキストブロックと互換性のある形で複数行のデータを安全に記述するための構文です。通常のダブルクオート文字列と異なり、バックスラッシュや改行をエスケープせずにそのまま保持できます。

## テキストブロック (`""" ... """`)

````jv
val auditLog = """
INFO 2024-10-05  User: Alice
WARN 2024-10-05  User: Bob
"""
````

- インデントは最小共通インデントまで自動的にトリムされ、先頭・末尾の空行は保持しません。原文をそのまま残したい場合は左端に合わせて記述します。
- Java 25ターゲットでは IR 上の text block ノードがそのまま `"""` リテラルとして出力されるため、SQL やログテンプレートを `\n` でつないだりエスケープする必要がありません。`cargo test -p jv_codegen_java --test raw_string_literals` では `"""` を含む生成結果を直接検証します。
- Java 21ターゲットでは `\n` や `\t` を含む従来の文字列リテラルとして出力され、 CLI から `jv build --target java21` を実行した際でも同じ内容が得られます。

## Rawシングルクオート (`'...'`)

````jv
val windowsPath = 'C:\Users\jv-dev'
````

- シングルクオートで囲まれた文字列は、バックスラッシュや `${...}` をエスケープせずに保持します。
- クオート自体を含めたい場合は `''` のように二重に記述します。
- Windowsパスや正規表現の文字クラスをそのまま貼り付けたい場合に便利です。

## Rawトリプルクオート (`''' ... '''`)

````jv
val sql = '''
SELECT *
FROM audit
WHERE level = 'WARN'
'''
````

- 複数行のリテラルを改めてエスケープすることなく保持します。
- `MultilineKind::RawTriple` として扱われ、`IndentMetadata` によって先頭インデントが記録されるため、`fmt` 後も読みやすさが維持されます。

## CLI・テストからの活用

- `samples/regex/concise_command.jv` はテキストブロックと raw シングルクオートの両方を使用した実例です。`make test` では `pipeline_compiles_regex_command_sample` がこのサンプルをビルドして Java 25/21 の両方で安全に処理できることを検証します。
- Raw文字列の Java 出力は `jv/tests/integration/raw_string_literals.rs` にあるスナップショットテストで継続的に監視されています。新しい構文を導入する際はこのテストに追加してから CLI/IDE へ反映してください。

これらの構文を利用することで、JSON・SQL・ログテンプレートなどをそのまま埋め込み、余分な `\` や文字列結合を減らすことができます。
